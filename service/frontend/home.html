<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <base href="/" />
    <script src="/js/test.js"></script>
</head>

<body>
    <a href="/logout">Logout</a>
    <h1>Home</h1>
    <div id="video-list"></div>

    <script>
        async function loadVideos() {
            const res = await fetch("/api/fetch_all_videos");
            const videos = await res.json();

            const container = document.getElementById("video-list");

            videos.forEach(video => {
                const div = document.createElement("div");
                div.className = "video-card";

                const img = document.createElement("img");
                img.src = video.thumbnail_path;
                img.alt = video.name;
                img.style.width = "200px";

                const h3 = document.createElement("h3");
                h3.textContent = video.name;

                const p = document.createElement("p");
                p.textContent = video.description;

                const videoEl = document.createElement("video");
                videoEl.width = 320;
                videoEl.controls = true;

                const source = document.createElement("source");
                source.src = video.path;
                source.type = "video/mp4";

                videoEl.appendChild(source);

                const hr = document.createElement("hr");

                div.appendChild(img);
                div.appendChild(h3);
                div.appendChild(p);
                div.appendChild(videoEl);
                div.appendChild(hr);

                container.appendChild(div);
            });

        }

        loadVideos();
    </script>


</body>

</html>